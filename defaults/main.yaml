---
metricbeat:
  enabled: no
  prefix:
    config: /usr/local/etc/metricbeat
  config:
    name: "{{ inventory_hostname }}"
    path:
      logs: /var/log/metricbeat
    metricbeat:
      modules:
        - module: system
          metricsets:
            - network
          enabled: true
          period: 60s
    setup:
      template:
        settings:
          index:
            number_of_shards: 1
            number_of_replicas: 0
filebeat:
  enabled: no
  prefix:
    config: /usr/local/etc/filebeat
  config:
    name: "{{ inventory_hostname }}"
    path:
      logs: /var/log/filebeat
    setup:
      template:
        enabled: no
      ilm:
        enabled: no
  elasticsearch_pipelines:
    varnish_access:
      enabled: no
      pipeline: varnish_access
      when:
        equals:
          fields:
            type: varnish_access
    nginx_access:
      enabled: no
      pipeline: nginx_access
      when:
        equals:
          fields:
            type: nginx_access
  inputs:
    varnish_access:
      enabled: no
      type: log
      paths:
        - /var/log/varnishncsa.log
      fields:
        fields:
          type: varnish_access
      fields_under_root: yes
    nginx_access:
      enabled: no
      type: log
      paths:
        - /var/log/nginx/access.log
      fields:
        fields:
          type: nginx_access
      fields_under_root: yes
